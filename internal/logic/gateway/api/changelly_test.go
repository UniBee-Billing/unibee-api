package api

import (
	"context"
	"fmt"
	"testing"
	"time"
	"unibee/internal/logic/gateway/gateway_bean"
	entity "unibee/internal/model/entity/oversea_pay"
	"unibee/utility"
)

func TestForApiKey(t *testing.T) {
	ctx := context.Background()
	changelly := Changelly{}
	_, _, err := changelly.GatewayTest(ctx, "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")
	if err != nil {
		return
	}
}

func TestForGetCurrencies(t *testing.T) {
	ctx := context.Background()
	changelly := Changelly{}
	_, err := changelly.GatewayGetCurrency(ctx, "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")
	if err != nil {
		return
	}
}

//func TestForGetCurrencyRate(t *testing.T) {
//	ctx := context.Background()
//	changelly := Changelly{}
//	_, err := changelly.GatewayGetFiatCurrencyRate(ctx, "105ee736f1d01918ffd7c794ebc4b6e94169454e10fbcf094a347f0a370c7f08", "LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRRERrQnpuakV0NVRJUnYKMDhmSVUvYmt6NjdSbUc2ZDNVSXlhL0liRmRjY0QzREdyWHRKTDJJaG5ROGhyV0RzaDFaUWV1K1dSaWF5VkI5NApEM01Ia0o3WWsxb05SaVNyV1FiSXA5eTZrbWdiMnpQeDhwRWJ0R2txRlVScWoxS2JNYTdEQmtwTjFxUnUxMTNsCmNHQTliWnBLL0lsUlVKOEpZUFBieU5kZnV3d2hPNDlqakg3M1FmVmVYY2RFNUd0WkpBK0R1R3pybTJsc1Z3N2cKQ3lhZlMyRGdLaGwzdjN3N3ZrOTRRVHJRaDFOR0hyM0lIaG5mSmxnQUlJOHFTNWtIUkh4SGZFbG1sREgwcDYxbgpRQWhJK0ljN3FiRzVKMnBDdk95S084L2FIY3BiZ1dpc2EzanV0cDFuYWNEa2lzdkhOcWpjRHRXQ1Y3K0pJYWk5CnlJZGw0OEVuQWdNQkFBRUNnZ0VBQVdlTGpaalRBZkFCYU5HRjRja1lsaWx0QVZHdG1iSDVHUkR3RUM4UlRjRHoKOTdsUE9yQ29iUmdLVlJ6cSsvS000Q1JzakJFU1BoTDBsdWJRSzFjU2pQajNSZTUzQjU2cXVjNHdKa3cwTmQ4QgpKSCt3SXhsM1FvekhONnl5ZnkyQUtua1B3amRadnZkZnFVSXNCQnBCYUJYSzRWYWU0eHV3ZWZ6d21iTm5odVdQCllvR0J0S2I2Mkx3blYvdXhGdWNwMTQra3QrUWsrRU5QbUwyVWE2emJscjBCTmFJMytIejJKSzd5L3JpcXZoOXEKbUNCektPVG5nNVdkV01BazhPc3ZmdnJ3WW1jU3FDbE9mcjhQbWhrbC9UeUw1d0F3clJGdEcyZW8rZmtFRG9zYgo1SnBQaXI0NmhBOENBNHBXTGdrUkcvbm54YmptYmphQlk4NUFtbnFad1FLQmdRRHdnVFFkRGVrcG1JRWpFbmMwCnM1WkxOZUY4SzlDWDRKbVVTOFhROHBEM3RQMkd0VDBraURkUWlWNTVWL2cxdXR2ZXdWT0xlbjFmdExub1ExR00KeGJaMytIOExWUEZLVVdsYno3SFhQOUxzMll5R1d4STJmU1R1R3pOTU1kR01ZVnZJUGFZMDlMSmRGdTRwM3F6bgptZHFBZHJtdC9ZTExpRy85Q2dZeFpYSVlmd0tCZ1FEUUthZ0tiOTBPcGNWa1RjaTdabEtlajhCT2pnSXhEV2FICm11SVMvMjZwN3FpYzdadVQzMEllckV3V0l5cjNDbk1TQ2paR2wyUGFTNE1uYmNmUU5lSHFlUzF6dXVmeTdxOTEKR1Q5UkNqQnZCaFZNUDVMVy9FcXAyMlhiK0hBZndnaStVcjAxbjlvNnVCV29mZys0ZGtwK0lQa3diSWk1QklsRwpYYWRIMHpCRFdRS0JnRE1yeW1MRUt1L211dE16Z3BsNy9HWlVPSDJxOU43YnN0R1NyYXdmY0NqRUlZMGYwcnFMCklQbkp3SWdnNTNiSEl6RHFBVlNUNDBrUnN0eHdObEcxWDNWM01kQy9hZmRlQ3dTMTFDandNM2loY1B6Rk04TFUKTFo5YnVqWmtBeW5UTFN3VnNkOWlrUEN0aUU3d1NlbWRHcGhxcW1jU29WbWMxZmNJd3ZpUGxROFJBb0dCQUszbwpIMXVZMlRYRGlJV2o5bStackt5THJEMzBwaUFVOGZPWWtnY05INGNZdkFWZS9Qc3RLakEyQWRyOHhvaGRVb1ZmCndyaDNBaFQ5d1RUUG9uOXdoSzAvVDVuQUxNZm9ZTzJUaWpKS01PeVFTSHJMSWdJNkJLYWpoUldoR1F0dkw1N1IKd1FGcjZ3WGpoVFNmSE1NZkVGMFBieC9sak5RRjFpblRWRTNOUWlVQkFvR0FNbk1EUGpxVWVkc2h0b2UySER5bwo4cG42S0ZiUVVIcDlnU2JXZk9XZnZqMkF0TzhUanlYUzhZVko5bVltNkpPZlo5cEVlMHBZamxEY1Z2MkRZWDcwCjBCMEIyWmkvdFZUOVU1ZUpVa2hTUEVHSnlwRHMwR1VVV3hXWFV0bllUU2tRcWZLTnNBS3V2WVpwbHg2NDU3Z3kKeXpCMFA3Q1gvdlgvc1dwZWx1WnhBQ3M9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K", "EUR", "USDT20")
//	if err != nil {
//		return
//	}
//}

func TestForGetCurrencyProviderList(t *testing.T) {
	ctx := context.Background()
	changelly := Changelly{}
	//_, err := changelly.GatewayGetFiatCurrencyList(ctx, "105ee736f1d01918ffd7c794ebc4b6e94169454e10fbcf094a347f0a370c7f08", "LS0tLS1CRUdJTiBQUklWQVRFIEtFWS0tLS0tCk1JSUV2UUlCQURBTkJna3Foa2lHOXcwQkFRRUZBQVNDQktjd2dnU2pBZ0VBQW9JQkFRRERrQnpuakV0NVRJUnYKMDhmSVUvYmt6NjdSbUc2ZDNVSXlhL0liRmRjY0QzREdyWHRKTDJJaG5ROGhyV0RzaDFaUWV1K1dSaWF5VkI5NApEM01Ia0o3WWsxb05SaVNyV1FiSXA5eTZrbWdiMnpQeDhwRWJ0R2txRlVScWoxS2JNYTdEQmtwTjFxUnUxMTNsCmNHQTliWnBLL0lsUlVKOEpZUFBieU5kZnV3d2hPNDlqakg3M1FmVmVYY2RFNUd0WkpBK0R1R3pybTJsc1Z3N2cKQ3lhZlMyRGdLaGwzdjN3N3ZrOTRRVHJRaDFOR0hyM0lIaG5mSmxnQUlJOHFTNWtIUkh4SGZFbG1sREgwcDYxbgpRQWhJK0ljN3FiRzVKMnBDdk95S084L2FIY3BiZ1dpc2EzanV0cDFuYWNEa2lzdkhOcWpjRHRXQ1Y3K0pJYWk5CnlJZGw0OEVuQWdNQkFBRUNnZ0VBQVdlTGpaalRBZkFCYU5HRjRja1lsaWx0QVZHdG1iSDVHUkR3RUM4UlRjRHoKOTdsUE9yQ29iUmdLVlJ6cSsvS000Q1JzakJFU1BoTDBsdWJRSzFjU2pQajNSZTUzQjU2cXVjNHdKa3cwTmQ4QgpKSCt3SXhsM1FvekhONnl5ZnkyQUtua1B3amRadnZkZnFVSXNCQnBCYUJYSzRWYWU0eHV3ZWZ6d21iTm5odVdQCllvR0J0S2I2Mkx3blYvdXhGdWNwMTQra3QrUWsrRU5QbUwyVWE2emJscjBCTmFJMytIejJKSzd5L3JpcXZoOXEKbUNCektPVG5nNVdkV01BazhPc3ZmdnJ3WW1jU3FDbE9mcjhQbWhrbC9UeUw1d0F3clJGdEcyZW8rZmtFRG9zYgo1SnBQaXI0NmhBOENBNHBXTGdrUkcvbm54YmptYmphQlk4NUFtbnFad1FLQmdRRHdnVFFkRGVrcG1JRWpFbmMwCnM1WkxOZUY4SzlDWDRKbVVTOFhROHBEM3RQMkd0VDBraURkUWlWNTVWL2cxdXR2ZXdWT0xlbjFmdExub1ExR00KeGJaMytIOExWUEZLVVdsYno3SFhQOUxzMll5R1d4STJmU1R1R3pOTU1kR01ZVnZJUGFZMDlMSmRGdTRwM3F6bgptZHFBZHJtdC9ZTExpRy85Q2dZeFpYSVlmd0tCZ1FEUUthZ0tiOTBPcGNWa1RjaTdabEtlajhCT2pnSXhEV2FICm11SVMvMjZwN3FpYzdadVQzMEllckV3V0l5cjNDbk1TQ2paR2wyUGFTNE1uYmNmUU5lSHFlUzF6dXVmeTdxOTEKR1Q5UkNqQnZCaFZNUDVMVy9FcXAyMlhiK0hBZndnaStVcjAxbjlvNnVCV29mZys0ZGtwK0lQa3diSWk1QklsRwpYYWRIMHpCRFdRS0JnRE1yeW1MRUt1L211dE16Z3BsNy9HWlVPSDJxOU43YnN0R1NyYXdmY0NqRUlZMGYwcnFMCklQbkp3SWdnNTNiSEl6RHFBVlNUNDBrUnN0eHdObEcxWDNWM01kQy9hZmRlQ3dTMTFDandNM2loY1B6Rk04TFUKTFo5YnVqWmtBeW5UTFN3VnNkOWlrUEN0aUU3d1NlbWRHcGhxcW1jU29WbWMxZmNJd3ZpUGxROFJBb0dCQUszbwpIMXVZMlRYRGlJV2o5bStackt5THJEMzBwaUFVOGZPWWtnY05INGNZdkFWZS9Qc3RLakEyQWRyOHhvaGRVb1ZmCndyaDNBaFQ5d1RUUG9uOXdoSzAvVDVuQUxNZm9ZTzJUaWpKS01PeVFTSHJMSWdJNkJLYWpoUldoR1F0dkw1N1IKd1FGcjZ3WGpoVFNmSE1NZkVGMFBieC9sak5RRjFpblRWRTNOUWlVQkFvR0FNbk1EUGpxVWVkc2h0b2UySER5bwo4cG42S0ZiUVVIcDlnU2JXZk9XZnZqMkF0TzhUanlYUzhZVko5bVltNkpPZlo5cEVlMHBZamxEY1Z2MkRZWDcwCjBCMEIyWmkvdFZUOVU1ZUpVa2hTUEVHSnlwRHMwR1VVV3hXWFV0bllUU2tRcWZLTnNBS3V2WVpwbHg2NDU3Z3kKeXpCMFA3Q1gvdlgvc1dwZWx1WnhBQ3M9Ci0tLS0tRU5EIFBSSVZBVEUgS0VZLS0tLS0K")
	trans, err := changelly.GatewayCryptoFiatTrans(ctx, &gateway_bean.GatewayCryptoFromCurrencyAmountDetailReq{
		Amount:      106,
		Currency:    "USD",
		CountryCode: "FR",
		Gateway: &entity.MerchantGateway{
			Id:                    29,
			MerchantId:            0,
			EnumKey:               0,
			GatewayType:           0,
			GatewayName:           "",
			Name:                  "",
			SubGateway:            "",
			BrandData:             "",
			Logo:                  "",
			Host:                  "",
			GatewayAccountId:      "",
			GatewayKey:            "",
			GatewaySecret:         "",
			Custom:                "",
			GmtCreate:             nil,
			GmtModify:             nil,
			Description:           "",
			WebhookKey:            "",
			WebhookSecret:         "",
			UniqueProductId:       "",
			CreateTime:            0,
			IsDeleted:             0,
			CryptoReceiveCurrency: "",
		},
	})
	if err != nil {
		return
	}
	fmt.Println(utility.MarshalToJsonString(trans))
}

func TestForTimeFormat(t *testing.T) {
	fmt.Println(time.Now().Format("2006-01-02T15:04:05.876Z"))
	fmt.Println(fmt.Sprintf("PDF Generated on %s", time.Now().Format(time.RFC850)))
	fmt.Println(utility.ConvertCentToDollarStr(108, "USDT"))
}
